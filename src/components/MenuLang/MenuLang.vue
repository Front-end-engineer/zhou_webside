<template>
  <el-dropdown
    trigger="hover"
    v-model="lang"
    @command="clickMenuLang"
    :popper-class="isHome ? 'header-popper' : 'header-popper lang-popper'"
    class="lang"
    placement="bottom-end"
  >
    <el-button
      type="info"
      plain
      circle
      style="
        width: 80rpx;
        height: 80rpx;
        background: transparent;
        font-weight: 700;
        font-size: 30rpx;
        color: white;
        outline: none;
      "
      >{{ lang }}</el-button
    >
    <template #dropdown>
      <el-dropdown-menu>
        <el-dropdown-item
          v-for="item in memuList"
          :command="item.key"
          :key="item.key"
          :class="lang === item.key && 'lang-active'"
        >
          <view class="lang-item">
            <div v-html="item.svgPath"></div>
            {{ item.name }}
          </view>
        </el-dropdown-item>
      </el-dropdown-menu>
    </template>
  </el-dropdown>
</template>

<script setup>
const memuList = ref([
  {
    svgPath: `<svg
        t="1750250273148"
        class="icon"
        viewBox="0 0 1024 1024"
        version="1.1"
        xmlns="http://www.w3.org/2000/svg"
        p-id="6005"
        width="20"
        height="20"
      >
        <path
          d="M7.450557 182.312865h1009.098886v659.37427H7.450557z"
          fill="#E60012"
          p-id="6006"
        ></path>
        <path
          d="M409.329071 350.289053l32.285745-11.853158 21.222798 27.20582-1.354646-34.317715 32.398633-11.740272-33.075957-9.482526-1.128872-34.430603-19.190828 28.673354-33.075956-9.595414 21.222798 27.092934zM273.18708 431.454966l-34.656378-107.129974-34.54349 107.129974-112.548561-0.112887 91.212876 65.926138-34.995039 107.017088 90.874214-66.377687 90.987102 66.377687-34.995039-107.017088 91.212876-65.926138zM536.552971 435.857568v34.430603l20.093926-27.883144 32.737294 10.611399-20.206813-27.770257 20.206813-27.770257-32.737294 10.724286-20.093926-27.883144v34.430603l-32.737295 10.498512zM596.383199 566.242311l-34.430603 0.112887-10.498512-32.737295-10.611399 32.737295-34.430603-0.112887 27.883145 20.206813-10.724287 32.737294 27.883144-20.3197 27.770257 20.3197-10.724286-32.737294zM461.37008 673.823834v-34.317716l-20.093925 27.883144-32.737295-10.724286 20.206813 27.770257-20.206813 27.883144 32.737295-10.724286 20.093925 27.883144v-34.430603l32.737295-10.611399z"
          fill="#FFF100"
          p-id="6007"
        ></path>
      </svg>`,
    key: "ZH",
    name: "中文",
  },
  {
    svgPath: `<svg
        t="1750250371189"
        class="icon"
        viewBox="0 0 1588 1024"
        version="1.1"
        xmlns="http://www.w3.org/2000/svg"
        p-id="7410"
        width="20"
        height="20"
      >
        <path
          d="M0 0h1588.476454v1024H0"
          fill="#FFFFFF"
          p-id="7411"
        ></path>
        <path
          d="M0 80.558449h1588.476454V0H0M0 157.145706h1588.476454v80.558449H0M0 314.291413h1588.476454v80.558448H0M0 471.437119h1588.476454v80.558449H0M0 629.150139h1588.476454v79.991135H0M0 786.295845h1588.476454v80.558449H0M0 1024h1588.476454v-80.558449H0"
          fill="#E50012"
          p-id="7412"
        ></path>
        <path
          d="M0 551.995568h688.150693V0H0"
          fill="#1E2380"
          p-id="7413"
        ></path>
        <path
          d="M56.731302 66.375623l17.019391 13.0482-6.240444-20.990582 17.019391-12.480886h-21.557895L56.731302 25.529086 49.923546 45.952355H28.365651l17.586704 12.480886-6.807757 20.990582 17.586704-13.0482zM171.328532 66.375623l17.586703 13.0482-6.807756-20.990582 17.586704-12.480886h-21.557895L171.328532 25.529086l-6.240443 20.423269h-21.557895l17.01939 12.480886-6.240443 20.990582 17.019391-13.0482zM286.493075 66.375623l17.586703 13.0482-6.807756-20.990582 17.586704-12.480886h-21.557895L286.493075 25.529086l-6.807756 20.423269h-21.557895l17.586703 12.480886-6.807756 20.990582 17.586704-13.0482zM401.657618 66.375623l17.01939 13.0482-6.240443-20.990582 17.019391-12.480886h-21.557895L401.657618 25.529086l-6.807757 20.423269h-21.557894l17.586703 12.480886-6.807756 20.990582 17.586704-13.0482zM516.254848 66.375623l17.586703 13.0482-6.807756-20.990582 17.586704-12.480886h-21.557895L516.254848 25.529086l-6.807757 20.423269h-20.990581l17.01939 12.480886-6.240443 20.990582 17.019391-13.0482zM631.419391 66.375623l17.586703 13.0482-6.807756-20.990582 17.019391-12.480886h-20.990582l-6.807756-20.423269-6.807757 20.423269h-21.557894l17.586703 12.480886-6.807756 20.990582 17.586704-13.0482zM114.029917 121.972299l17.586703 12.480887-6.807756-20.423269 17.586704-12.480887h-21.557895l-6.807756-20.423268-6.807756 20.423268h-21.557895l17.586704 12.480887-6.807757 20.423269 17.586704-12.480887zM229.19446 121.972299l17.01939 12.480887-6.240443-20.423269 17.019391-12.480887h-20.990582l-6.807756-20.423268-6.807756 20.423268h-21.557895l17.586703 12.480887-6.807756 20.423269 17.586704-12.480887zM343.79169 121.972299l17.586703 12.480887-6.807756-20.423269 17.586704-12.480887h-21.557895l-6.807756-20.423268-6.240443 20.423268h-21.557895l17.01939 12.480887-6.240443 20.423269 17.019391-12.480887zM458.956233 121.972299l17.586703 12.480887-6.807756-20.423269 17.586704-12.480887h-21.557895l-6.807756-20.423268-6.807757 20.423268h-21.557894l17.586703 12.480887-6.807756 20.423269 17.586704-12.480887zM574.120776 121.972299l17.01939 12.480887-6.807756-20.423269 17.586704-12.480887h-21.557895l-6.240443-20.423268-6.807757 20.423268h-21.557894l17.586703 12.480887-6.807756 20.423269 17.586704-12.480887zM56.731302 177.568975l17.019391 12.480886-6.240444-20.423268 17.019391-12.480887h-21.557895L56.731302 136.722438l-6.807756 20.423268H28.365651l17.586704 12.480887-6.807757 20.423268 17.586704-12.480886zM171.328532 177.568975l17.586703 12.480886-6.807756-20.423268 17.586704-12.480887h-21.557895l-6.807756-20.423268-6.240443 20.423268h-21.557895l17.01939 12.480887-6.240443 20.423268 17.019391-12.480886zM286.493075 177.568975l17.586703 12.480886-6.807756-20.423268 17.586704-12.480887h-21.557895l-6.807756-20.423268-6.807756 20.423268h-21.557895l17.586703 12.480887-6.807756 20.423268 17.586704-12.480886zM401.657618 177.568975l17.01939 12.480886-6.240443-20.423268 17.019391-12.480887h-21.557895l-6.240443-20.423268-6.807757 20.423268h-21.557894l17.586703 12.480887-6.807756 20.423268 17.586704-12.480886zM516.254848 177.568975l17.586703 12.480886-6.807756-20.423268 17.586704-12.480887h-21.557895l-6.807756-20.423268-6.807757 20.423268h-20.990581l17.01939 12.480887-6.240443 20.423268 17.019391-12.480886zM631.419391 177.568975l17.586703 12.480886-6.807756-20.423268 17.019391-12.480887h-20.990582l-6.807756-20.423268-6.807757 20.423268h-21.557894l17.586703 12.480887-6.807756 20.423268 17.586704-12.480886zM114.029917 233.165651l17.586703 12.480886-6.807756-20.423268 17.586704-12.480887h-21.557895l-6.807756-20.423268-6.807756 20.423268h-21.557895l17.586704 12.480887-6.807757 20.423268 17.586704-12.480886zM229.19446 233.165651l17.01939 12.480886-6.240443-20.423268 17.019391-12.480887h-20.990582l-6.807756-20.423268-6.807756 20.423268h-21.557895l17.586703 12.480887-6.807756 20.423268 17.586704-12.480886zM343.79169 233.165651l17.586703 12.480886-6.807756-20.423268 17.586704-12.480887h-21.557895l-6.807756-20.423268-6.240443 20.423268h-21.557895l17.01939 12.480887-6.240443 20.423268 17.019391-12.480886zM458.956233 233.165651l17.586703 12.480886-6.807756-20.423268 17.586704-12.480887h-21.557895l-6.807756-20.423268-6.807757 20.423268h-21.557894l17.586703 12.480887-6.807756 20.423268 17.586704-12.480886zM574.120776 233.165651l17.01939 12.480886-6.807756-20.423268 17.586704-12.480887h-21.557895l-6.240443-20.423268-6.807757 20.423268h-21.557894l17.586703 12.480887-6.807756 20.423268 17.586704-12.480886zM56.731302 288.762327l17.019391 12.480886-6.240444-20.423268 17.019391-12.480887h-21.557895L56.731302 247.915789l-6.807756 20.423269H28.365651l17.586704 12.480887-6.807757 20.423268 17.586704-12.480886zM171.328532 288.762327l17.586703 12.480886-6.807756-20.423268 17.586704-12.480887h-21.557895l-6.807756-20.423269-6.240443 20.423269h-21.557895l17.01939 12.480887-6.240443 20.423268 17.019391-12.480886zM286.493075 288.762327l17.586703 12.480886-6.807756-20.423268 17.586704-12.480887h-21.557895l-6.807756-20.423269-6.807756 20.423269h-21.557895l17.586703 12.480887-6.807756 20.423268 17.586704-12.480886zM401.657618 288.762327l17.01939 12.480886-6.240443-20.423268 17.019391-12.480887h-21.557895l-6.240443-20.423269-6.807757 20.423269h-21.557894l17.586703 12.480887-6.807756 20.423268 17.586704-12.480886zM516.254848 288.762327l17.586703 12.480886-6.807756-20.423268 17.586704-12.480887h-21.557895l-6.807756-20.423269-6.807757 20.423269h-20.990581l17.01939 12.480887-6.240443 20.423268 17.019391-12.480886zM631.419391 288.762327l17.586703 12.480886-6.807756-20.423268 17.019391-12.480887h-20.990582l-6.807756-20.423269-6.807757 20.423269h-21.557894l17.586703 12.480887-6.807756 20.423268 17.586704-12.480886zM114.029917 344.359003l17.586703 12.480886-6.807756-20.423269 17.586704-12.480886h-21.557895l-6.807756-20.423269-6.807756 20.423269h-21.557895l17.586704 12.480886-6.807757 20.423269 17.586704-12.480886zM229.19446 344.359003l17.01939 12.480886-6.240443-20.423269 17.019391-12.480886h-20.990582l-6.807756-20.423269-6.807756 20.423269h-21.557895l17.586703 12.480886-6.807756 20.423269 17.586704-12.480886zM343.79169 344.359003l17.586703 12.480886-6.807756-20.423269 17.586704-12.480886h-21.557895l-6.807756-20.423269-6.240443 20.423269h-21.557895l17.01939 12.480886-6.240443 20.423269 17.019391-12.480886zM458.956233 344.359003l17.586703 12.480886-6.807756-20.423269 17.586704-12.480886h-21.557895l-6.807756-20.423269-6.807757 20.423269h-21.557894l17.586703 12.480886-6.807756 20.423269 17.586704-12.480886zM574.120776 344.359003l17.01939 12.480886-6.807756-20.423269 17.586704-12.480886h-21.557895l-6.240443-20.423269-6.807757 20.423269h-21.557894l17.586703 12.480886-6.807756 20.423269 17.586704-12.480886zM56.731302 399.955679l17.019391 12.480886-6.240444-20.423269 17.019391-13.048199h-21.557895L56.731302 359.109141l-6.807756 19.855956H28.365651l17.586704 13.048199-6.807757 20.423269 17.586704-12.480886zM171.328532 399.955679l17.586703 12.480886-6.807756-20.423269 17.586704-13.048199h-21.557895l-6.807756-19.855956-6.240443 19.855956h-21.557895l17.01939 13.048199-6.240443 20.423269 17.019391-12.480886zM286.493075 399.955679l17.586703 12.480886-6.807756-20.423269 17.586704-13.048199h-21.557895l-6.807756-19.855956-6.807756 19.855956h-21.557895l17.586703 13.048199-6.807756 20.423269 17.586704-12.480886zM401.657618 399.955679l17.01939 12.480886-6.240443-20.423269 17.019391-13.048199h-21.557895l-6.240443-19.855956-6.807757 19.855956h-21.557894l17.586703 13.048199-6.807756 20.423269 17.586704-12.480886zM516.254848 399.955679l17.586703 12.480886-6.807756-20.423269 17.586704-13.048199h-21.557895l-6.807756-19.855956-6.807757 19.855956h-20.990581l17.01939 13.048199-6.240443 20.423269 17.019391-12.480886zM631.419391 399.955679l17.586703 12.480886-6.807756-20.423269 17.019391-13.048199h-20.990582l-6.807756-19.855956-6.807757 19.855956h-21.557894l17.586703 13.048199-6.807756 20.423269 17.586704-12.480886zM114.029917 455.552355l17.586703 12.480886-6.807756-20.423269 17.586704-13.048199h-21.557895l-6.807756-20.423269-6.807756 20.423269h-21.557895l17.586704 13.048199-6.807757 20.423269 17.586704-12.480886zM229.19446 455.552355l17.01939 12.480886-6.240443-20.423269 17.019391-13.048199h-20.990582l-6.807756-20.423269-6.807756 20.423269h-21.557895l17.586703 13.048199-6.807756 20.423269 17.586704-12.480886zM343.79169 455.552355l17.586703 12.480886-6.807756-20.423269 17.586704-13.048199h-21.557895l-6.807756-20.423269-6.240443 20.423269h-21.557895l17.01939 13.048199-6.240443 20.423269 17.019391-12.480886zM458.956233 455.552355l17.586703 12.480886-6.807756-20.423269 17.586704-13.048199h-21.557895l-6.807756-20.423269-6.807757 20.423269h-21.557894l17.586703 13.048199-6.807756 20.423269 17.586704-12.480886zM574.120776 455.552355l17.01939 12.480886-6.807756-20.423269 17.586704-13.048199h-21.557895l-6.240443-20.423269-6.807757 20.423269h-21.557894l17.586703 13.048199-6.807756 20.423269 17.586704-12.480886zM56.731302 510.581717l17.019391 13.0482-6.240444-20.423269 17.019391-13.048199h-21.557895L56.731302 469.73518l-6.807756 20.423269H28.365651l17.586704 13.048199-6.807757 20.423269L56.731302 510.581717zM171.328532 510.581717l17.586703 13.0482-6.807756-20.423269 17.586704-13.048199h-21.557895l-6.807756-20.423269-6.240443 20.423269h-21.557895l17.01939 13.048199-6.240443 20.423269 17.019391-13.0482zM286.493075 510.581717l17.586703 13.0482-6.807756-20.423269 17.586704-13.048199h-21.557895l-6.807756-20.423269-6.807756 20.423269h-21.557895l17.586703 13.048199-6.807756 20.423269 17.586704-13.0482zM401.657618 510.581717l17.01939 13.0482-6.240443-20.423269 17.019391-13.048199h-21.557895l-6.240443-20.423269-6.807757 20.423269h-21.557894l17.586703 13.048199-6.807756 20.423269 17.586704-13.0482zM516.254848 510.581717l17.586703 13.0482-6.807756-20.423269 17.586704-13.048199h-21.557895l-6.807756-20.423269-6.807757 20.423269h-20.990581l17.01939 13.048199-6.240443 20.423269 17.019391-13.0482zM631.419391 510.581717l17.586703 13.0482-6.807756-20.423269 17.019391-13.048199h-20.990582l-6.807756-20.423269-6.807757 20.423269h-21.557894l17.586703 13.048199-6.807756 20.423269 17.586704-13.0482z"
          fill="#FFFFFF"
          p-id="7414"
        ></path>
      </svg>`,
    key: "EN",
    name: "English",
  },
]);

const isHome = ref(
  getCurrentPages().at(-1)?.route?.includes("pages/home/home")
);

let lang = ref(uni.getStorageSync("locale_lang") || "ZH");

const clickMenuLang = (val) => {
  if (lang.value == val) return false;
  lang.value = val;
  uni.setStorageSync("locale_lang", val);
  location.reload();
};
</script>

<style lang="less" scoped>
.lang-item {
  display: flex;
  align-items: center;
  flex: 1;
  gap: 16rpx;
  font-size: 32rpx;
  color: #fff;
  padding: 32rpx 40rpx 32rpx 32rpx;
  > svg {
    width: 34rpx;
    height: 34rpx;
  }
}

.lang-active {
  background-color: #132f44 !important;
}
</style>
